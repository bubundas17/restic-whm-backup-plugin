#!/bin/bash
# AppConfig for Restic Backup Plugin

# Define the plugin's name and version
PLUGIN_NAME="Restic Backup"
PLUGIN_VERSION="1.0"

# Required service and url specifications
service="Restic Backup"
url="cgi/restic_backup_admin.cgi"

# Define the plugin's menu items in WHM
add_item() {
    local file="$1"
    local url="$2"
    local desc="$3"
    local img="$4"
    local group="$5"
    local feature="$6"

    echo "url=$url"
    echo "desc=$desc"
    echo "img=$img"
    echo "group=$group"
    echo "feature=$feature"
    echo "file=$file"
}

# Admin menu items
add_item "restic_backup_admin.cgi" "cgi/restic_backup_admin.cgi" "Restic Backup Admin" "restic_backup.png" "backup" "restic_backup_admin"

# User menu items (for cPanel)
add_cpitem() {
    local file="$1"
    local url="$2"
    local desc="$3"
    local img="$4"
    local group="$5"
    local feature="$6"

    echo "cpurl=$url"
    echo "cpdesc=$desc"
    echo "cpimg=$img"
    echo "cpgroup=$group"
    echo "cpfeature=$feature"
    echo "cpfile=$file"
}

add_cpitem "restic_backup_user.cgi" "cgi/restic_backup_user.cgi" "Restic Backup" "restic_backup.png" "backup" "restic_backup_user"

# Define ACLs for the plugin
add_acl "restic_backup_admin" "Restic Backup Admin" "Allows administrators to manage restic backups"
add_acl "restic_backup_user" "Restic Backup User" "Allows users to manage their own restic backups"